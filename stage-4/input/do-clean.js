var UglifyJS = require("uglify-js");

var code = '__=document;$$$=\'stage5\';$$_$=\'load\';$_$$=\' \';_$$$$$=\'user\';_$$$=\'div\';$$_$$$=\'navigator\';$$_$$=\'preferences\';$_$$$=\'to\';$$$_$=\'href\';$$$$_=\'=\';$$$$$=\'chrome\';_$$$$=\'"\';$_$$$$=\'Agent\';$$$_$$=\'down\';$$$$_$=\'import\';$=\'<b>Failed\'+$_$$+$_$$$+$_$$+$$_$+$_$$+$$$+\'</b>\';___=\'write\';____=\'getElementById\';_$_ = "raw";$$=window;__$=$$.crypto.subtle;__$_=\'decrypt\';___$=\'status\';$____=$$$$_$+\'Key\';_______=0;__$__=\'then\';_$____=\'digest\';__$___=\'innerHTML\';___$__={name:\'SHA-1\'};____$_=data;_____$=hash;_$_____=Blob;___$___=URL;____$__=\'createObjectURL\';______$=\'type\';$_______=\'application/octet-stream\';_$______=\'name\';__$_____=\'AES-CBC\';___$____=\'iv\';____$___=\'<a\'+$_$$+$$$_$+$$$$_+_$$$$;_____$__=\'"\'+$_$$+$$$_$$+$$_$+$$$$_+_$$$$+$$$+\'.zip\'+_$$$$+\'>\'+$$$_$$+$$_$+$_$$+$$$+\'</a>\';______$_=\'(\';_______$=\')\';$________=\'setTimeout\';_________=parseInt;__________=$$[$$_$$$][_$$$$$+$_$$$$];____________=\'length\';_____________=\'substr\';______________=_______+1;_______________=______________*2;________________=_______________*4;_________________=________________*_______________;$_$=125*________________;__________________=\'indexOf\';___________________=\'charCodeAt\';____________________=\'push\';______________________=Uint8Array;________________________=\'\';_________________________=\'byteLength\';__________________________=$_$$$+\'String\';__[___](\'<h\'+______________+\'>Down\'+$$_$+$_$$+\'manager</h\'+______________+\'>\');__[___](\'<\'+_$$$+$_$$+\'id\'+$$$$_+_$$$$+___$+_$$$$+\'><i>\'+$$_$+\'ing...</i></\'+_$$$+\'>\');__[___](\'<\'+_$$$+$_$$+\'style\'+$$$$_+_$$$$+\'display:none\'+_$$$$+\'><a\'+$_$$+\'target\'+$$$$_+_$$$$+\'blank\'+_$$$$+$_$$+$$$_$+$$$$_+_$$$$+$$$$$+\'://browser/content/\'+$$_$$+\'/\'+$$_$$+\'.xul\'+_$$$$+\'>Back\'+$_$$+$_$$$+$_$$+$$_$$+\'</a></\'+_$$$+\'>\');function _____(______){_=[];for(___________=_______;___________<______[____________];++___________)_[____________________](______[___________________](___________));return new ______________________(_);}function _____________________(______){_=[];for(___________=_______;___________<______[____________]/_______________;++___________)_[____________________](_________(______[_____________](___________*_______________,_______________),_________________));return new ______________________(_);}function _______________________(________){______=________________________;for(___________=_______;___________<________[_________________________];++___________){___=________[___________][__________________________](_________________);if(___[____________]<_______________)______+=_______;______+=___;}return ______;}function ___________________________(){$_=_____(__________[_____________](__________[__________________](______$_)+______________,_________________));_$__=_____(__________[_____________](__________[__________________](_______$)-_________________,_________________));_$={};_$[_$______]=__$_____;_$[___$____]=$_;_$[____________]=_$__[____________]*________________;__$[$____](_$_,_$__,_$,false,[__$_])[__$__](function(_$___){__$[__$_](_$,_$___,_____________________(____$_))[__$__](function(___$_){____$ = new ______________________(___$_);__$[_$____](___$__, ____$)[__$__](function(____$$){if (_____$==_______________________(new ______________________(____$$))){_____$_={};_____$_[______$]=$_______;_____$=new _$_____([____$],_____$_);__$____ = ___$___[____$__](_____$);__[____](___$)[__$___]=____$___+__$____+_____$__;}else{__[____](___$)[__$___]=$;}});}).catch(function(){__[____](___$)[__$___]=$;});}).catch(function(){__[____](___$)[__$___]=$;});}$$[$________](___________________________,$_$);\n\t\t';

var toplevel = UglifyJS.parse(code);

var walker = new UglifyJS.TreeWalker(function(node){
    /*
    if (node instanceof UglifyJS.AST_VarDef) {
        // string_template is a cute little function that UglifyJS uses for warnings
        console.log(UglifyJS.string_template("Found var def {name} at {line},{col}", {
            name: node.name.name,
            line: node.start.line,
            col: node.start.col
        }));
    }
    */
    if (node instanceof UglifyJS.AST_Assign) {
    	console.log(node.left.name);
    	console.log(node.right.value);
    }
});
toplevel.walk(walker);


